# frequency_meter_Nios_display
Проект для китов **Terasic DE1-SoC** и **Terasic DE0-Nano-SoC** с чипом **Altera Cyclone V**.  
Собран в среде **Quartus Prime 16.0**.  
Сделан с использованием дисплея **DV-20400-S1FBLY/R22**.  
Проект частотомера с выводом значений на подключенный дисплей.
В проекте применяется [модуль частотомера](https://github.com/FlexlabCompany/frequency_meter_Nios_display/tree/master/freq_m_module) и [библиотека](https://github.com/FlexlabCompany/frequency_meter_Nios_display/tree/master/hd44780) для общения с дисплеем в ОС FreeRtos.  
Без дисплея работу частотомера можно посмотреть подробнее в проекте [частотомер + SPI](https://github.com/PetrDYu/frequency_meter).  
Работу с дисплеем без частотомера можно посмотреть в проекте по [сылке](https://github.com/PetrDYu/freertos_niosII/tree/master/freertos_niosII_display).

Проект для DE0-Nano-SoC в текущей модификации исполняет роль частотомера, получая частоту по дифференциальному каналу со стандартом LVDS и выводя значение на дисплей.  
Проект для DE1-SoC сделан вспомогательным и только генерирует частоту посредством встроенных PLL. 
Также как средство отладки в проект добавлена пересылка значения частоты по SPI (в качестве принимающего устройства использовался BeagleBone Black).  

Для кита DE0-Nano-SoC вывод на дисплей реализован без FreeRtos, т.к. на нём отсутствует SDRAM, подключенная к ПЛИС, а памяти внутри чипа для запуска данной ОС не хватает.  
Проект для DE1-SoC можно восстановить для полноценной работы частотомера с дисплеем (на FreeRtos) и приёмом частоты извне по LVDS. Необходимо исправить следующие места:
- в файле .v необходимо раскомментировать блок, подключающий систему NiosII;
- если необходим внешний ввод частоты, необходимо wire lvds_freq изменить на input, поменять в PinPlanner дифференциальную пару пинов на входную и изменить *assign lvds_freq = clk_in* на **assign clk_in = lvds_freq**;
- раскомментировать блок, формирующий из сигнала cout_b более продолжительный сигнал высокого уровня.


## Библиотеки для контроллера дисплея HD44780 (аналог KS0066U)
В папке с проектом для DE1-SoC лежит версия библиотек, используемая при работе с FreeRtos.  
В папке с проектом для DE0-Nano-SoC лежит версия библиотек, не поддерживающая FreeRtos и используемая для программирования при недостатке памяти.
